<ion-content *ngIf="vm$ | async as vm">
  <app-simulation-loading [loading]="vm.loading"></app-simulation-loading>
  <div *ngIf="!vm.loading">
    <ion-card>
      <ion-card-header>
        <ion-card-title *ngIf="vm.name"> Ok {{ vm.name }}, </ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <p>
          Você quer um empréstimo no valor de
          {{ vm.result?.valor | currency }} e deseja pagar em
          {{ vm.result?.qtdParcelas | number : "1.0-0" }} parcelas
        </p>
        <p>Nós temos os seguintes produtos que atendem a sua necessidade:</p>
        <ion-item-group>
          <ion-item-divider>
            <ion-label class="ion-text-uppercase">
              <ion-row>
                <ion-col>
                  {{ vm.result?.descricaoProduto }}
                </ion-col>
                <ion-col>
                  {{ vm.result?.taxaJuros | percent : "1.2-2" }}
                </ion-col>
              </ion-row>
            </ion-label>
          </ion-item-divider>
          <ion-item
            *ngFor="let result of vm.total"
            button
            [detail]="true"
            (click)="redirect(result)"
          >
            <ion-label>
              <ion-row>
                <ion-col>Tipo Amort.</ion-col>

                <ion-col>{{ result.tipo }} </ion-col></ion-row
              >
              <ion-row>
                <ion-col>Vr. Amortização: </ion-col
                ><ion-col> {{ result.valorAmortizacao | currency }}</ion-col>
              </ion-row>
              <ion-row>
                <ion-col>Vr. Juros: </ion-col>
                <ion-col>{{ result.valorJuros | currency : "BRL" }}</ion-col>
              </ion-row>
              <ion-row>
                <ion-col> Vr. Total</ion-col
                ><ion-col>{{ result.valorTotal | currency }}</ion-col>
              </ion-row>
            </ion-label>
          </ion-item>
        </ion-item-group>
        <p>Clique em 1 das opções para ver os detalhes</p>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>
<ion-footer>
  <ion-button (click)="goBack()" expand="full">
    Alterar Valores
    <ion-icon name="chevron-back-outline" slot="start"></ion-icon>
  </ion-button>
</ion-footer>
